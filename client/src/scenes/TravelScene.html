<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Temporal Transition - SHE<Codes/></title>
  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    body, html { height:100%; font-family:'Courier New', monospace; overflow:hidden; }

    /* Stage container */
    .stage {
      position:relative;
      width:100vw; height:100vh;
      background:#000; /* starts black */
      animation: sceneFlash 2.8s forwards; /* drive background progression */
    }

    /* Keyframes: black -> white flash -> travel background */
    @keyframes sceneFlash {
      0% { background:#000; }
      55% { background:#fff; }
      65% { background:#fff; }
      /* Use correct existing asset 'traval.png' */
      100% { background:#000 url('../assets/traval.png') center/cover no-repeat; }
    }

    /* Text panel */
    .panel {
      position:absolute;
      top:50%; left:50%;
      transform:translate(-50%, -50%);
      width:75%;
      max-width:960px;
      background:rgba(10,10,20,0.85);
      border:4px solid #667eea;
      border-radius:20px;
      padding:40px 50px;
      color:#fff;
      font-size:1.25rem;
      line-height:1.6;
      opacity:0;
      animation: panelReveal 1s ease forwards 1.9s, panelPulse 4s ease-in-out infinite 3.1s; /* appear after flash */
      box-shadow:0 0 30px rgba(102,126,234,0.55), 0 0 8px rgba(255,255,255,0.2) inset;
    }

    @keyframes panelReveal {
      0% { opacity:0; transform:translate(-50%, -50%) scale(0.92); }
      100% { opacity:1; transform:translate(-50%, -50%) scale(1); }
    }

    /* Gentle breathing plus intermittent shake */
    @keyframes panelPulse {
      0%, 100% { box-shadow:0 0 30px rgba(102,126,234,0.55); }
      50% { box-shadow:0 0 50px rgba(102,126,234,0.85); }
    }

    /* Occasional subtle shake overlay animation */
    .panel.shake {
      animation: panelReveal 1s ease forwards, panelPulse 4s ease-in-out infinite 1.2s, panelShake 0.4s linear; 
    }

    @keyframes panelShake {
      0%,100% { transform:translate(-50%, -50%) translateX(0); }
      25% { transform:translate(-50%, -50%) translateX(-6px); }
      50% { transform:translate(-50%, -50%) translateX(6px); }
      75% { transform:translate(-50%, -50%) translateX(-3px); }
    }

    .accent-spark {
      position:absolute; width:10px; height:10px; background:#ffd700; border-radius:50%;
      filter:drop-shadow(0 0 6px #ffd700);
      opacity:0; animation: spark 3s linear forwards;
    }
    @keyframes spark {
      0% { opacity:0; transform:scale(0.3); }
      10% { opacity:1; }
      80% { opacity:1; }
      100% { opacity:0; transform:translateY(-140px) scale(1.4); }
    }

    .continue-btn {
      margin-top:30px;
      display:inline-block;
      background:linear-gradient(135deg,#f093fb,#f5576c);
      padding:14px 36px;
      border:none; color:#fff; font-weight:bold; font-size:1rem;
      border-radius:30px; cursor:pointer; font-family:'Courier New', monospace;
      box-shadow:0 6px 18px rgba(0,0,0,0.4);
      transition:.3s;
    }
    .continue-btn:hover { transform:translateY(-3px); box-shadow:0 10px 26px rgba(0,0,0,0.55); }
    .continue-btn:active { transform:translateY(0); }

  /* Removed fallback warning styling */
  </style>
</head>
<body>
  <div class="stage" id="stage">
    <div class="panel" id="panel">
      <p>You feel a weird sensation and somehow you get pulling into the old machene. lights flash all round you and your head is speaning</p>
      <button class="continue-btn" id="continueBtn" disabled>Stabilizing...</button>
    </div>
  </div>

  <script>
    // After panel appears, enable continue
    setTimeout(() => {
      const btn = document.getElementById('continueBtn');
      btn.textContent = 'Continue â†’';
      btn.disabled = false;
    }, 3200);

    // Navigate to next level (Scene One)
    document.getElementById('continueBtn').addEventListener('click', () => {
      window.location.assign('/src/scenes/levels/SceneOne.html');
    });

    // Random spark accents around panel edges post-flash
    function spawnSpark() {
      const panel = document.getElementById('panel');
      const rect = panel.getBoundingClientRect();
      const spark = document.createElement('div');
      spark.className = 'accent-spark';
      const x = Math.random() * rect.width;
      const y = Math.random() * rect.height;
      spark.style.left = (rect.left + x) + 'px';
      spark.style.top = (rect.top + y) + 'px';
      document.body.appendChild(spark);
      setTimeout(() => spark.remove(), 3000);
    }
    setTimeout(() => { // begin spawning after flash
      for (let i=0;i<14;i++) {
        setTimeout(spawnSpark, 600 + i*180);
      }
    }, 1900);

    // Occasional shake to emphasize instability
    setInterval(() => {
      const panel = document.getElementById('panel');
      if (!panel.classList.contains('shake')) {
        panel.classList.add('shake');
        setTimeout(()=> panel.classList.remove('shake'), 450);
      }
    }, 5000);

    // Removed fallback image warning logic
  </script>
</body>
</html>